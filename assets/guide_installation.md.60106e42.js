import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.68de6d59.js";const u=JSON.parse('{"title":"安装","description":"","frontmatter":{},"headers":[],"relativePath":"guide/installation.md","filePath":"guide/installation.md","lastUpdated":1698072082000}'),e={name:"guide/installation.md"},o=l(`<h1 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h1><p>本节介绍如何在<code>uni-app</code>项目中安装<code>Uni Mini Router</code>和生成路由表的插件<code>uni-read-pages-vite</code>或<code>uni-read-pages</code>。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-ccld4" id="tab-UGAlKbu" checked="checked"><label for="tab-UGAlKbu">npm</label><input type="radio" name="group-ccld4" id="tab-Bzi1u60"><label for="tab-Bzi1u60">yarn</label><input type="radio" name="group-ccld4" id="tab-vsenU7H"><label for="tab-vsenU7H">pnpm</label></div><div class="blocks"><div class="language-bash active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-mini-router</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--save</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-mini-router</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-mini-router</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div></div></div><h2 id="路由表插件安装" tabindex="-1">路由表插件安装 <a class="header-anchor" href="#路由表插件安装" aria-label="Permalink to &quot;路由表插件安装&quot;">​</a></h2><p>我们提供了两种方式来生成路由表：<a href="https://www.npmjs.com/package/uni-parse-pages" target="_blank" rel="noreferrer">uni-parse-pages</a>和<a href="https://www.npmjs.com/package/uni-read-pages-vite" target="_blank" rel="noreferrer">uni-read-pages-vite</a>，这两种方式都可以实现将<code>pages.json</code>中的路由信息转化为<code>uni-mini-router</code>需要的路由表信息，其中<code>uni-read-pages-vite</code>依赖<code>vite</code>，在编译时将读取<code>pages.json</code>生成的路由表注入全局变量，而<code>uni-parse-pages</code>不依赖<code>vite</code>，在应用每次热重载时都会从<code>pages.json</code>中读取信息生成路由表。</p><p>由于<code>uni-app</code>在编译到小程序端时无法触发<code>vite</code>的热更新，所以目前只有使用<code>uni-parse-pages</code>生成路由表才可以实现路由信息热更新的功能。</p><blockquote><p>注意！！！<code>uni-parse-pages</code>在<code>uni-mini-router@0.1.0</code>版本起获得支持，在之前的版本使用会有问题。</p></blockquote><h3 id="以下两种方式二选一" tabindex="-1">以下两种方式二选一： <a class="header-anchor" href="#以下两种方式二选一" aria-label="Permalink to &quot;以下两种方式二选一：&quot;">​</a></h3><h3 id="使用uni-parse-pages生成路由表-0-1-0起支持" tabindex="-1">使用uni-parse-pages生成路由表（0.1.0起支持） <a class="header-anchor" href="#使用uni-parse-pages生成路由表-0-1-0起支持" aria-label="Permalink to &quot;使用uni-parse-pages生成路由表（0.1.0起支持）&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-rRsa-" id="tab-_y76sjf" checked="checked"><label for="tab-_y76sjf">npm</label><input type="radio" name="group-rRsa-" id="tab-TJWeAeC"><label for="tab-TJWeAeC">yarn</label><input type="radio" name="group-rRsa-" id="tab-D-7zp3a"><label for="tab-D-7zp3a">pnpm</label></div><div class="blocks"><div class="language-bash active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-parse-pages</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--save</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-parse-pages</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-parse-pages</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div></div></div><h3 id="使用uni-read-pages-vite生成路由表" tabindex="-1">使用uni-read-pages-vite生成路由表 <a class="header-anchor" href="#使用uni-read-pages-vite生成路由表" aria-label="Permalink to &quot;使用uni-read-pages-vite生成路由表&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-rfKwV" id="tab-rKdh3rh" checked="checked"><label for="tab-rKdh3rh">npm</label><input type="radio" name="group-rfKwV" id="tab-K5GlKE7"><label for="tab-K5GlKE7">yarn</label><input type="radio" name="group-rfKwV" id="tab-NKoojTE"><label for="tab-NKoojTE">pnpm</label></div><div class="blocks"><div class="language-bash active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-read-pages-vite</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--save</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-read-pages-vite</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uni-read-pages-vite</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span></span></code></pre></div></div></div><h2 id="配置路由表" tabindex="-1">配置路由表 <a class="header-anchor" href="#配置路由表" aria-label="Permalink to &quot;配置路由表&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">关于本步骤</p><p>在使用<code>uni-read-pages-vite</code>生成路由表时需要进行此项配置，而使用<code>uni-read-pages</code>则不需要。</p></div><p>配置 <code>vite.config.ts</code> 通过 <code>define</code> 注入全局变量 <a href="https://cn.vitejs.dev/config/shared-options.html#define" target="_blank" rel="noreferrer">查看文档</a></p><blockquote><p>注意：在 Vite 中使用 <code>define</code> 注入的全局变量并不是热更新的，因为这些变量是在构建时被注入到代码中的，而不是在运行时动态生成的。这意味着如果您更新了<code>page.json</code>，则需要重新构建应用程序才能使更改生效。</p></blockquote><h3 id="cli创建的项目配置" tabindex="-1">CLI创建的项目配置 <a class="header-anchor" href="#cli创建的项目配置" aria-label="Permalink to &quot;CLI创建的项目配置&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> uni </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@dcloudio/vite-plugin-uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> TransformPages </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">uni-read-pages-vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#82AAFF;">uni</span><span style="color:#BABED8;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">define</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">ROUTES</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">TransformPages</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">routes</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 注入路由表</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="hbuilderx创建的项目配置" tabindex="-1">HbuilderX创建的项目配置 <a class="header-anchor" href="#hbuilderx创建的项目配置" aria-label="Permalink to &quot;HbuilderX创建的项目配置&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> uni </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@dcloudio/vite-plugin-uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> TransformPages </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">uni-read-pages-vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#82AAFF;">uni</span><span style="color:#BABED8;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">define</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">ROUTES</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">TransformPages</span><span style="color:#BABED8;">(__dirname)</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">routes</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 注入路由表</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="声明文件type-d-ts" tabindex="-1">声明文件<code>type.d.ts</code> <a class="header-anchor" href="#声明文件type-d-ts" aria-label="Permalink to &quot;声明文件\`type.d.ts\`&quot;">​</a></h3><p><code>.d.ts</code>文件的作用是描述<code>JavaScript</code>库、模块或其他代码的类型声明和元数据，以便编辑器和开发者能够更好地理解和使用该代码。在编译时，<code>TypeScript</code>编译器会使用<code>.d.ts</code>文件来验证代码正确性，并帮助开发者在开发过程中提供更好的代码提示和自动补全功能。</p><p>在项目src目录下（HbuilderX创建的项目可以在根目录下）创建<code>type.d.ts</code>文件。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//type.d.ts</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> ROUTES</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> []</span></span></code></pre></div>`,24),p=[o];function t(c,r,i,d,y,D){return a(),n("div",null,p)}const F=s(e,[["render",t]]);export{u as __pageData,F as default};
